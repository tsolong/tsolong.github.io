import{_ as e,M as i,p as l,q as c,R as n,t as s,N as p,a1 as a}from"./framework-cf3d8b6f.js";const o={},d=a(`<h1 id="注解" tabindex="-1"><a class="header-anchor" href="#注解" aria-hidden="true">#</a> 注解</h1><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><div class="custom-container tip"><p class="custom-container-title">特点</p><p>注解是 <code>Hyperf</code> 非常强大的一项功能，也是 <code>MineAdmin</code> 到处使用的功能。</p><p>程序可以通过注解的形式减少很多的配置，以及实现很多非常方便的功能。</p></div><h3 id="什么是注解什么是注释" tabindex="-1"><a class="header-anchor" href="#什么是注解什么是注释" aria-hidden="true">#</a> 什么是注解什么是注释？</h3><p>在解释注解之前我们需要先定义一下 <code>注解</code> 与 <code>注释</code> 的区别：</p><ul><li>注释：给程序员看，帮助理解代码，对代码起到解释、说明的作用。</li><li>注解：给应用程序看，用于元数据的定义，单独使用时没有任何作用，需配合应用程序对其元数据进行利用才有作用。</li></ul><h3 id="注解如何书写" tabindex="-1"><a class="header-anchor" href="#注解如何书写" aria-hidden="true">#</a> 注解如何书写</h3><p>由于，我们已经使用了 <code>PHP 8.0</code> 及以上版本，我们可以使用php自带的原生注解，故我们也只讲原生注解使用方法。</p><h3 id="注解配置" tabindex="-1"><a class="header-anchor" href="#注解配置" aria-hidden="true">#</a> 注解配置</h3><p>/config/autoload/annotations.php 可配置注解收集目录、收集器及忽略项</p><p>我们还是看控制器的代码，我们发现代码里存在两句：</p><ul><li>#[Controller(prefix: &quot;foo&quot;)]</li><li>#[GetMapping(&quot;index&quot;)]</li></ul><p>以上就是使用和书写注解的方式，由 <code>#[]</code> 组成，方括号内的内容则是注解内容</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Foo<span class="token punctuation">\\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>MineController</span>
<span class="token keyword">use</span> <span class="token package">Hyperf<span class="token punctuation">\\</span>HttpServer<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>Controller</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Hyperf<span class="token punctuation">\\</span>HttpServer<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Psr<span class="token punctuation">\\</span>Http<span class="token punctuation">\\</span>Message<span class="token punctuation">\\</span>ResponseInterface</span><span class="token punctuation">;</span>

<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Controller</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">prefix</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;foo&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">FooController</span> <span class="token keyword">extends</span> <span class="token class-name">MineController</span> <span class="token punctuation">{</span>
    
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">GetMapping</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;index&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;操作成功&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token string single-quoted-string">&#39;data&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;hello MineAdmin!&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="路由注解" tabindex="-1"><a class="header-anchor" href="#路由注解" aria-hidden="true">#</a> 路由注解</h2><div class="custom-container tip"><p class="custom-container-title">提示</p><p>系统内所有的 <code>http</code> 访问都是以注解形式定义的路由。根据系统的开发规范，要放弃过去的配置文件注册路由的形式，转而使用注解来注册路由。</p><p>相比配置文件使用注解来注册路由有以下好处：</p><ul><li>找控制器文件方便，不需要再打开相应的配置文件查找具体的控制器文件</li><li>找路由方便，不需要对比控制器文件和配置文件相互印证，只需要通过全局搜索注解路由即可</li><li>控制器即是路由文件，减少了配置文件</li><li>对新手友好，可以更快掌握开发方式</li></ul></div><h3 id="类路由注解" tabindex="-1"><a class="header-anchor" href="#类路由注解" aria-hidden="true">#</a> 类路由注解</h3><p>类路由使用 <code>#[Controller]</code> 注解来注册路由，使用 <code>prefix</code> 指定类路由的前缀</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token doc-comment comment">/**
 * 该类的访问前缀则为：system/user
 */</span>
<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Controller</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">prefix</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;system/user&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">MineController</span>
<span class="token punctuation">{</span>
    <span class="token comment">//todo...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="方法路由注解" tabindex="-1"><a class="header-anchor" href="#方法路由注解" aria-hidden="true">#</a> 方法路由注解</h3><ul><li><strong>#[PostMapping]</strong> POST请求路由注解</li><li><strong>#[GetMapping]</strong> GET请求路由注解</li><li><strong>#[DeleteMapping]</strong> DELETE请求路由注解</li><li><strong>#[PutMapping]</strong> PUT请求路由注解</li></ul>`,21),r={class:"custom-container tip"},u=n("p",{class:"custom-container-title"},"提示",-1),k={href:"https://hyperf.wiki/2.2/#/zh-cn/router?id=%e9%80%9a%e8%bf%87%e6%b3%a8%e8%a7%a3%e5%ae%9a%e4%b9%89%e8%b7%af%e7%94%b1",target:"_blank",rel:"noopener noreferrer"},h=a(`<div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token doc-comment comment">/**
 * 定义控制器访问前缀
 */</span>
<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Controller</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">prefix</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;system/user&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">MineController</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 定义操作路由
     * 该方法的访问路径为：system/user/index，请求方式：GET
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">GetMapping</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;index&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路由命名规范" tabindex="-1"><a class="header-anchor" href="#路由命名规范" aria-hidden="true">#</a> 路由命名规范</h3><div class="custom-container tip"><p class="custom-container-title">规范</p><p>路由命名规范为：模块名/业务名/操作名</p><p>整个系统的路由定义规范皆是如此，尽量遵守约定，可以减少项目后续中的麻烦。</p></div><h2 id="系统内置注解" tabindex="-1"><a class="header-anchor" href="#系统内置注解" aria-hidden="true">#</a> 系统内置注解</h2><p>MineAdmin 在开发之初就规划了几个注解，我们可以在开发中调用这些注解来帮助完成业务开发</p><h3 id="登录验证注解" tabindex="-1"><a class="header-anchor" href="#登录验证注解" aria-hidden="true">#</a> 登录验证注解</h3><h4 id="注解名" tabindex="-1"><a class="header-anchor" href="#注解名" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[Auth]</strong></li></ul><h4 id="说明" tabindex="-1"><a class="header-anchor" href="#说明" aria-hidden="true">#</a> 说明</h4><p>用户必须登录后才可以访问某个接口</p><h4 id="使用范围" tabindex="-1"><a class="header-anchor" href="#使用范围" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">√</td><td style="text-align:center;">√</td></tr><tr><td style="text-align:center;">类使用后，该类所有方法都将验证</td><td style="text-align:center;">若类未使用，仅方法使用，只对该方法检查</td></tr></tbody></table><h4 id="注解参数" tabindex="-1"><a class="header-anchor" href="#注解参数" aria-hidden="true">#</a> 注解参数</h4><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">scene</td><td style="text-align:center;">场景名，需要验证登录的场景</td><td style="text-align:center;">&#39;default&#39;</td></tr></tbody></table><h4 id="使用示例" tabindex="-1"><a class="header-anchor" href="#使用示例" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 引入注解</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>Auth</span><span class="token punctuation">;</span>

<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Auth</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">MineController</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...    </span>
<span class="token punctuation">}</span>

<span class="token comment">// 或者</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">FooController</span> <span class="token keyword">extends</span> <span class="token class-name">MineController</span>
<span class="token punctuation">{</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Auth</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="权限验证注解" tabindex="-1"><a class="header-anchor" href="#权限验证注解" aria-hidden="true">#</a> 权限验证注解</h3><h4 id="注解名-1" tabindex="-1"><a class="header-anchor" href="#注解名-1" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[Permission]</strong></li></ul><h4 id="说明-1" tabindex="-1"><a class="header-anchor" href="#说明-1" aria-hidden="true">#</a> 说明</h4><p>只允许有某接口权限的用户访问（会附带其登录验证）</p><h4 id="使用范围-1" tabindex="-1"><a class="header-anchor" href="#使用范围-1" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">√</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">仅能对方法使用</td></tr></tbody></table><h4 id="注解参数-1" tabindex="-1"><a class="header-anchor" href="#注解参数-1" aria-hidden="true">#</a> 注解参数</h4><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">code</td><td style="text-align:center;">权限代码标识，支持验证多个权限</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">where</td><td style="text-align:center;">验证条件：AND, OR</td><td style="text-align:center;">OR</td></tr></tbody></table><h4 id="使用示例-1" tabindex="-1"><a class="header-anchor" href="#使用示例-1" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 引入注解</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>Permission</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">FooController</span> <span class="token keyword">extends</span> <span class="token class-name">MineController</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 验证一个权限，通过即可访问
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Permission</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;system:foo:index&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 验证多个权限，全部通过才可访问
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Permission</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;system:foo:save, system:foo:update&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;AND&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 验证多个权限，其中一个通过即可访问
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Permission</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;system:foo:index, system:foo:read&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;OR&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="角色验证注解" tabindex="-1"><a class="header-anchor" href="#角色验证注解" aria-hidden="true">#</a> 角色验证注解</h3><h4 id="注解名-2" tabindex="-1"><a class="header-anchor" href="#注解名-2" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[Role]</strong></li></ul><h4 id="说明-2" tabindex="-1"><a class="header-anchor" href="#说明-2" aria-hidden="true">#</a> 说明</h4><p>只允许有用某个角色的用户访问（会附带其登录验证）</p><h4 id="使用范围-2" tabindex="-1"><a class="header-anchor" href="#使用范围-2" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">√</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">仅能对方法使用</td></tr></tbody></table><h4 id="注解参数-2" tabindex="-1"><a class="header-anchor" href="#注解参数-2" aria-hidden="true">#</a> 注解参数</h4><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">code</td><td style="text-align:center;">角色代码标识，支持验证多个角色</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">where</td><td style="text-align:center;">验证条件：AND, OR</td><td style="text-align:center;">OR</td></tr></tbody></table><h4 id="使用示例-2" tabindex="-1"><a class="header-anchor" href="#使用示例-2" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 引入注解</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>Role</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">FooController</span> <span class="token keyword">extends</span> <span class="token class-name">MineController</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 验证一个角色，通过即可访问
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Role</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;superAdmin&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 验证多个角色，全部通过才可访问
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Role</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;ceo, cfo&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;AND&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 验证多个角色，其中一个通过即可访问
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Role</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;cto, cfo&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;OR&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="操作日志注解" tabindex="-1"><a class="header-anchor" href="#操作日志注解" aria-hidden="true">#</a> 操作日志注解</h3><h4 id="注解名-3" tabindex="-1"><a class="header-anchor" href="#注解名-3" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[OperationLog]</strong></li></ul><h4 id="说明-3" tabindex="-1"><a class="header-anchor" href="#说明-3" aria-hidden="true">#</a> 说明</h4><p>使用后会记录用户在后台请求某接口的参数、返回值、用户信息等</p><h4 id="使用范围-3" tabindex="-1"><a class="header-anchor" href="#使用范围-3" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">√</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">仅能对方法使用</td></tr></tbody></table><h4 id="注解参数-3" tabindex="-1"><a class="header-anchor" href="#注解参数-3" aria-hidden="true">#</a> 注解参数</h4><div class="custom-container tip"><p class="custom-container-title">提示</p><p>如果未传参数，请配合 <code>#[Permission]</code> 注解使用</p></div><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">menuName</td><td style="text-align:center;">菜单名称</td><td style="text-align:center;">默认值：未定义菜单，搭配 #[Permission] 注解使用后，会自动获取菜单名称</td></tr></tbody></table><h4 id="使用示例-3" tabindex="-1"><a class="header-anchor" href="#使用示例-3" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 引入注解</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>OperationLog</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">MineController</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 新增用户
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Permission</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;system:user:save&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">OperationLog</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 获取用户列表
     */</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">OperationLog</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;用户列表&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="数据库事务注解" tabindex="-1"><a class="header-anchor" href="#数据库事务注解" aria-hidden="true">#</a> 数据库事务注解</h3><h4 id="注解名-4" tabindex="-1"><a class="header-anchor" href="#注解名-4" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[Transaction]</strong></li></ul><h4 id="说明-4" tabindex="-1"><a class="header-anchor" href="#说明-4" aria-hidden="true">#</a> 说明</h4><p>使用后会自动启动事务、提交。执行失败自动回滚。</p><h4 id="使用范围-4" tabindex="-1"><a class="header-anchor" href="#使用范围-4" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">√</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">仅能对方法使用</td></tr></tbody></table><h4 id="注解参数-4" tabindex="-1"><a class="header-anchor" href="#注解参数-4" aria-hidden="true">#</a> 注解参数</h4><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">retry</td><td style="text-align:center;">重试次数</td><td style="text-align:center;">1</td></tr></tbody></table><h4 id="使用示例-4" tabindex="-1"><a class="header-anchor" href="#使用示例-4" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 引入注解</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>Transaction</span><span class="token punctuation">;</span>

<span class="token comment">// 忽略其他代码</span>

<span class="token doc-comment comment">/**
 * 新增用户，使用事务注解，失败重试 2 次
 */</span>
<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Transaction</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">MineModel</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="防止重复提交注解" tabindex="-1"><a class="header-anchor" href="#防止重复提交注解" aria-hidden="true">#</a> 防止重复提交注解</h3><h4 id="注解名-5" tabindex="-1"><a class="header-anchor" href="#注解名-5" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[Resubmit]</strong></li></ul><h4 id="说明-5" tabindex="-1"><a class="header-anchor" href="#说明-5" aria-hidden="true">#</a> 说明</h4><p>对接口使用后会在3秒内（默认值）禁止再次访问</p><h4 id="使用范围-5" tabindex="-1"><a class="header-anchor" href="#使用范围-5" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">√</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">仅能对方法使用</td></tr></tbody></table><h4 id="注解参数-5" tabindex="-1"><a class="header-anchor" href="#注解参数-5" aria-hidden="true">#</a> 注解参数</h4><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">second</td><td style="text-align:center;">要禁止的秒数</td><td style="text-align:center;">3</td></tr><tr><td style="text-align:center;">message</td><td style="text-align:center;">提示的信息</td><td style="text-align:center;">-</td></tr></tbody></table><h4 id="使用示例-5" tabindex="-1"><a class="header-anchor" href="#使用示例-5" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 引入注解</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>Resubmit</span><span class="token punctuation">;</span>

<span class="token comment">// 忽略其他代码</span>

<span class="token doc-comment comment">/**
 * 新增用户，3秒内禁止重复提交
 */</span>
<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">Resubmit</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">MineModel</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="清除缓存注解" tabindex="-1"><a class="header-anchor" href="#清除缓存注解" aria-hidden="true">#</a> 清除缓存注解</h3><h4 id="注解名-6" tabindex="-1"><a class="header-anchor" href="#注解名-6" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[DeleteCache]</strong></li></ul><h4 id="说明-6" tabindex="-1"><a class="header-anchor" href="#说明-6" aria-hidden="true">#</a> 说明</h4><p>用于更新、删除数据操作后，执行清除缓存操作，只需要指定缓存key即可</p><h4 id="使用范围-6" tabindex="-1"><a class="header-anchor" href="#使用范围-6" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">√</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">仅能对方法使用</td></tr></tbody></table><h4 id="注解参数-6" tabindex="-1"><a class="header-anchor" href="#注解参数-6" aria-hidden="true">#</a> 注解参数</h4><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">keys</td><td style="text-align:center;">要清除的缓存key，支持多个，每个key以逗号隔开；支持 <code>通配符：*</code> 清除缓存</td><td style="text-align:center;">-</td></tr></tbody></table><h4 id="使用示例-6" tabindex="-1"><a class="header-anchor" href="#使用示例-6" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 引入注解</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>DeleteCache</span><span class="token punctuation">;</span>

<span class="token comment">// 忽略其他代码</span>

<span class="token doc-comment comment">/**
 * 在更新完信息后，使用删除缓存注解，自动清除指定缓存
 */</span>
<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">DeleteCache</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;crontab,loginInfo:*&quot;</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">updateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ResponseInterface</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="excel相关注解" tabindex="-1"><a class="header-anchor" href="#excel相关注解" aria-hidden="true">#</a> Excel相关注解</h3><h4 id="注解名-7" tabindex="-1"><a class="header-anchor" href="#注解名-7" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[ExcelData]</strong></li><li><strong>#[ExcelProperty]</strong></li></ul><h4 id="说明-7" tabindex="-1"><a class="header-anchor" href="#说明-7" aria-hidden="true">#</a> 说明</h4><p>注解服务用于 <strong>数据导出为Excel</strong> 和 <strong>Excel导入到数据库</strong></p><h4 id="exceldata-使用范围" tabindex="-1"><a class="header-anchor" href="#exceldata-使用范围" aria-hidden="true">#</a> #[ExcelData] 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">√</td><td style="text-align:center;">x</td></tr><tr><td style="text-align:center;">仅能对类使用，声明类为 <code>ExcelData</code></td><td style="text-align:center;">-</td></tr></tbody></table><h4 id="excelproperty-使用范围" tabindex="-1"><a class="header-anchor" href="#excelproperty-使用范围" aria-hidden="true">#</a> #[ExcelProperty] 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th><th style="text-align:center;">属性</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">√</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">x</td><td style="text-align:center;">声明导出列映射数据库字段属性</td></tr></tbody></table><h4 id="exceldata-注解参数" tabindex="-1"><a class="header-anchor" href="#exceldata-注解参数" aria-hidden="true">#</a> #[ExcelData] 注解参数</h4><p>无</p><h4 id="excelproperty-注解参数" tabindex="-1"><a class="header-anchor" href="#excelproperty-注解参数" aria-hidden="true">#</a> #[ExcelProperty] 注解参数</h4><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">value</td><td style="text-align:center;">显示在excel第一行的列名称</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">index</td><td style="text-align:center;">设置excel列的显示顺序，从0开始</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">width</td><td style="text-align:center;">设置单元格的宽度</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">align</td><td style="text-align:center;">设置单元格的对齐方式，有 <code>left</code>, <code>center</code>, <code>right</code> 可选</td><td style="text-align:center;">left</td></tr><tr><td style="text-align:center;">headColor</td><td style="text-align:center;">设置<code>表头</code>单元格字体颜色，十六进制，例如 <code>00FF00</code>，xlswriter只支持整行设置</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">headBgColor</td><td style="text-align:center;">设置<code>表头</code>单元格背景颜色，十六进制，例如 <code>00FF00</code>，xlswriter只支持整行设置</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">color</td><td style="text-align:center;">设置<code>表体</code>单元格字体颜色，十六进制，例如 <code>00FF00</code>，xlswriter只支持整行设置</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">bgClor</td><td style="text-align:center;">设置<code>表体</code>单元格背景颜色，十六进制，例如 <code>00FF00</code>，xlswriter只支持整行设置</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">dictName</td><td style="text-align:center;">设置<code>字典标识</code>(后台字典管理里查看)，数据在导出时自动翻译成对应标签数据</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">dictData</td><td style="text-align:center;">设置自定义字典数据，数据在导出时自动翻译成对应标签数据</td><td style="text-align:center;">-</td></tr></tbody></table><div class="custom-container tip"><p class="custom-container-title">dictData说明</p><p>比如，数据库里的数据是 <strong>1、2、3</strong> 之类的固定类别数据，那么在定义 dictData 要以 key 是数据 value 是标签的形式来定义：</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">ExcelProperty</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">value</span><span class="token punctuation">:</span> <span class="token string double-quoted-string">&quot;数据类别&quot;</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">index</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">dictData</span><span class="token punctuation">:</span><span class="token punctuation">[</span> <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;类别1&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;类别2&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;类别3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">public</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$type</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><h4 id="使用示例-7" tabindex="-1"><a class="header-anchor" href="#使用示例-7" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>System<span class="token punctuation">\\</span>Dto</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Interfaces<span class="token punctuation">\\</span>MineModelExcel</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>ExcelData</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>ExcelProperty</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 用户数据对象类
 */</span>
<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">ExcelData</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">UserDto</span> <span class="token keyword">implements</span> <span class="token class-name">MineModelExcel</span>
<span class="token punctuation">{</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">ExcelProperty</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">value</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;用户名&quot;</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">index</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">width</span><span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$username</span><span class="token punctuation">;</span>

    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">ExcelProperty</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">value</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;昵称&quot;</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">index</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">width</span><span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$nickname</span><span class="token punctuation">;</span>
    
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">ExcelProperty</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">value</span><span class="token operator">=</span><span class="token string double-quoted-string">&quot;手机&quot;</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">index</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token attribute-class-name class-name">width</span><span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$phone</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="依赖代理注解" tabindex="-1"><a class="header-anchor" href="#依赖代理注解" aria-hidden="true">#</a> 依赖代理注解</h3><h4 id="注解名-8" tabindex="-1"><a class="header-anchor" href="#注解名-8" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[DependProxy]</strong></li></ul><h4 id="说明-8" tabindex="-1"><a class="header-anchor" href="#说明-8" aria-hidden="true">#</a> 说明</h4><p>无需修改源代码，可无感平替某个类或接口。在注解收集目录内，申明即生效。</p><h4 id="使用范围-7" tabindex="-1"><a class="header-anchor" href="#使用范围-7" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">√</td><td style="text-align:center;">x</td></tr></tbody></table><h4 id="注解参数-7" tabindex="-1"><a class="header-anchor" href="#注解参数-7" aria-hidden="true">#</a> 注解参数</h4><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">values</td><td style="text-align:center;">类型：array，被替换目标类的名称</td><td style="text-align:center;">-</td></tr><tr><td style="text-align:center;">provider</td><td style="text-align:center;">类型：string，提供服务目标类的名称</td><td style="text-align:center;">默认为当前类</td></tr></tbody></table><h4 id="使用示例-8" tabindex="-1"><a class="header-anchor" href="#使用示例-8" aria-hidden="true">#</a> 使用示例</h4><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// 引入注解</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Annotation<span class="token punctuation">\\</span>DependProxy</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Mine<span class="token punctuation">\\</span>Interfaces<span class="token punctuation">\\</span>UserServiceInterface</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 实现无感替换 mineadmin 自带的登录 退出 功能
 */</span>
<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">DependProxy</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">values</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token attribute-class-name class-name">UserServiceInterface</span><span class="token operator">::</span><span class="token constant">class</span> <span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">loginHandler</span> <span class="token keyword">implements</span> <span class="token class-name">UserServiceInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">login</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\\</span>Mine<span class="token punctuation">\\</span>Vo<span class="token punctuation">\\</span>UserServiceVo</span> <span class="token variable">$vo</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// todo...</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// todo...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="远程通用接口启停注解" tabindex="-1"><a class="header-anchor" href="#远程通用接口启停注解" aria-hidden="true">#</a> 远程通用接口启停注解</h3><h4 id="注解名-9" tabindex="-1"><a class="header-anchor" href="#注解名-9" aria-hidden="true">#</a> 注解名</h4><ul><li><strong>#[RemoteState]</strong></li></ul><h4 id="说明-9" tabindex="-1"><a class="header-anchor" href="#说明-9" aria-hidden="true">#</a> 说明</h4><p>无需修改源代码，可无感平替某个类或接口。</p><h4 id="使用范围-8" tabindex="-1"><a class="header-anchor" href="#使用范围-8" aria-hidden="true">#</a> 使用范围</h4><ul><li>√ 代表可用</li><li>x 代表不可用</li></ul><table><thead><tr><th style="text-align:center;">类</th><th style="text-align:center;">方法</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">√</td></tr></tbody></table><h4 id="注解参数-8" tabindex="-1"><a class="header-anchor" href="#注解参数-8" aria-hidden="true">#</a> 注解参数</h4><table><thead><tr><th style="text-align:center;">参数名</th><th style="text-align:center;">说明</th><th style="text-align:center;">默认值</th></tr></thead><tbody><tr><td style="text-align:center;">state</td><td style="text-align:center;">类型：bool，远程通用接口允许状态</td><td style="text-align:center;">true</td></tr></tbody></table>`,130);function m(b,v){const t=i("ExternalLinkIcon");return l(),c("div",null,[d,n("div",r,[u,n("p",null,[s("其他请求注解方式请参考 hyperf "),n("a",k,[s("路由"),p(t)]),s(" 章节")])]),h])}const y=e(o,[["render",m],["__file","annotation.html.vue"]]);export{y as default};
